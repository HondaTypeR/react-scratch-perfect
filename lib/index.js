module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("tslib")},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0),i=n.n(o),a=(n(3),1===window.devicePixelRatio?2:window.devicePixelRatio),s=function(e){return e&&e.preventDefault()},c=!1;try{var u=Object.defineProperty({},"passive",{get:function(){return c=!0}});window.addEventListener("test",null,u)}catch(e){}var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={ch:0,cw:0,isSuccess:!1,visible:!1},t.init=function(e){var n=t.props,r=n.size,o=n.round,i=void 0===o?[0,0,0,0]:o,u=n.color,l=void 0===u?"#808080":u,d=n.imgRepeat,f=t.wrap.clientHeight*a,p=t.wrap.clientWidth*a;t.setState({cw:p,ch:f},(function(){if(t.canvas.addEventListener("touchmove",s,!!c&&{passive:!1}),t.ctx=t.canvas.getContext("2d"),t.ctx.scale(a,a),e){var n=t.image,o=n.width,u=n.height;if("height"===d){var v=o*(f/a/u);t.ctx.drawImage(t.image,0,0,o,u,(p/a-v)/2,0,v,f/a)}else if("width"===d){var h=u*(p/a/o);t.ctx.drawImage(t.image,0,0,o,u,0,(f/a-h)/2,p/a,h)}else"repeat"===d?(t.ctx.fillStyle=t.ctx.createPattern(t.image,"repeat"),t.ctx.fillRect(0,0,p,f)):t.ctx.drawImage(t.image,0,0,o,u,0,0,p/a,f/a)}else t.ctx.fillStyle=l,t.ctx.fillRect(0,0,p,f);for(t.ptg=0,t.ctx.globalCompositeOperation="destination-out",t.ctx.strokeStyle="#000000",t.size=r||p/a/10,t.ctx.lineWidth=t.size,t.ctx.lineCap="round",t.round=i,t.cells=[],t.roundX=[t.round[3],p/a-t.round[1]],t.roundY=[t.round[0],f/a-t.round[2]],t.cellX=(t.roundX[1]-t.roundX[0])/10,t.cellY=(t.roundY[1]-t.roundY[0])/10,t.sum=t.roundLen=100;t.sum--;)t.cells.push(!1);setTimeout((function(){t.setState({visible:!0})}),500)}))},t.down=function(e){var n=t.wrap.getClientRects()[0],r=n.left,o=n.top;t.offsetLeft=r,t.offsetTop=o;var i=e.changedTouches;if(i){var a=i[0];t.preX=a.pageX-t.offsetLeft,t.preY=a.pageY-t.offsetTop,window.addEventListener("touchmove",t.move,!1),window.addEventListener("touchend",t.up,!1)}else t.preX=e.pageX-t.offsetLeft,t.preY=e.pageY-t.offsetTop,window.addEventListener("mousemove",t.move,!1),window.addEventListener("mouseup",t.up,!1);t.handleRound(t.preX,t.preY)},t.move=function(e){var n=t.props.mode,r=void 0===n?"move":n,o=e.changedTouches,i=t.preX,a=t.preY;if(t.ctx.beginPath(),t.ctx.moveTo(t.preX,t.preY),o){var s=o[0];t.preX=s.pageX-t.offsetLeft,t.preY=s.pageY-t.offsetTop}else t.preX=e.pageX-t.offsetLeft,t.preY=e.pageY-t.offsetTop;t.ctx.lineTo(t.preX,t.preY),t.ctx.stroke(),t.canvas.style.zIndex=((+t.canvas.style.zIndex||0)+1)%2+2+"",t.addRound(i,a,t.preX,t.preY),"move"===r&&t.checkRound(e)},t.up=function(e,n){var r=t.props.mode;e.changedTouches?(window.removeEventListener("touchmove",t.move,!1),window.removeEventListener("touchend",t.up,!1)):(window.removeEventListener("mousemove",t.move,!1),window.removeEventListener("mouseup",t.up,!1)),"end"===r&&!n&&t.checkRound(e)},t.addRound=function(e,n,r,o){var i=r-e,a=o-n;if(i>t.cellX||a>t.cellY){var s=void 0,c=void 0;if(0===a)s=t.cellX,c=0;else if(0===i)c=t.cellY,s=0;else{var u=Math.abs(a/i);u>t.cellY/t.cellX?(s=t.cellY/2/u,c=t.cellY/2):(c=t.cellX/2*u,s=t.cellX/2)}for(var l=i>0?[e,r]:[r,e],d=l[0],f=l[1],p=a>0?[n,o]:[o,o],v=p[0],h=p[1];!(d>f||v>h);)d+=s,v+=c,t.handleRound(d,v);t.handleRound(r,o)}else t.handleRound(r,o)},t.handleRound=function(e,n){for(var r=(e-t.round[3])/t.cellX,o=(n-t.round[0])/t.cellY,i=[Math.floor(r-t.size/2/t.cellX),Math.floor(r+t.size/2/t.cellX)],a=[Math.floor(o-t.size/2/t.cellY),Math.floor(o+t.size/2/t.cellY)],s=i[0];s<=i[1];s++)if(s>=0&&s<10)for(var c=a[0];c<=a[1];c++)if(c>=0&&c<10){var u=e-t.round[3]-(s+.5)*t.cellX,l=n-t.round[0]-(c+.5)*t.cellY,d=10*c+s;u*u+l*l<t.size*t.size/4&&!t.cells[d]&&(t.cells[d]=!0,t.ptg++)}},t.checkRound=function(e){var n=t.props,r=n.percentage,o=void 0===r?70:r,i=n.onChange,a=n.clear,s=n.onSuccess;i&&i(t.ptg),t.ptg>=o&&(a&&t.ctx.clearRect(0,0,t.state.cw,t.state.ch),t.setState({isSuccess:!0}),t.up(e,!0),s&&s())},t}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.img;t?(this.image=document.createElement("img"),this.image.src=t,this.image.onload=function(){return e.init(!0)},this.image.onerror=function(){return e.init(!1)}):this.init(!1)},t.prototype.render=function(){var e=this,t=this.props,n=t.children,r=t.className,o=void 0===r?"":r;return i.a.createElement("div",{className:"___scratch "+o+" "+(this.state.isSuccess?"frozen":""),ref:function(t){return e.wrap=t}},i.a.createElement("div",{className:"___content "+(this.state.visible?"visible":"")},n),i.a.createElement("canvas",{ref:function(t){return e.canvas=t},width:this.state.cw,height:this.state.ch,onMouseDown:this.down,onTouchStart:this.down}))},t}(o.PureComponent);t.default=l},function(e,t,n){var r=n(4);"string"==typeof r&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(6)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".___scratch {\n  position: relative;\n  display: inline-block;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  font-size: 0;\n}\n.___scratch.frozen {\n  pointer-events: none;\n}\n.___scratch .___content {\n  opacity: 0;\n}\n.___scratch .___content.visible {\n  opacity: 1;\n}\n.___scratch canvas {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n}\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot).concat(e," */")}));return[n].concat(i).concat([o]).join("\n")}var a,s,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var a=0;a<e.length;a++){var s=e[a];null!=s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="(".concat(s[2],") and (").concat(n,")")),t.push(s))}},t}},function(e,t,n){"use strict";var r,o={},i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function s(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function c(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id],a=0;if(i){for(i.refs++;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(m(r.parts[a],t))}else{for(var s=[];a<r.parts.length;a++)s.push(m(r.parts[a],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function u(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var r=n.nc;r&&(e.attributes.nonce=r)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var l,d=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function f(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function p(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o&&e.setAttribute("media",o),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var v=null,h=0;function m(e,t){var n,r,o;if(t.singleton){var i=h++;n=v||(v=u(t)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else n=u(t),r=p.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=s(e,t);return c(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var a=n[i],u=o[a.id];u&&(u.refs--,r.push(u))}e&&c(s(e,t),t);for(var l=0;l<r.length;l++){var d=r[l];if(0===d.refs){for(var f=0;f<d.parts.length;f++)d.parts[f]();delete o[d.id]}}}}}]);