module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=n(1),o=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(3)),i=o(n(4)),s=o(n(5)),c=o(n(6)),l=o(n(7)),u=o(n(8)),f=o(n(9)),d=o(n(10)),p=r(n(11));n(12);var h=1===window.devicePixelRatio?2:window.devicePixelRatio,v=function(e){return e&&e.preventDefault()},m=!1;try{var g=Object.defineProperty({},"passive",{get:function(){return m=!0}});window.addEventListener("test",null,g)}catch(e){}var b=function(e){function t(){var e,n;(0,i.default)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=(0,c.default)(this,(e=(0,l.default)(t)).call.apply(e,[this].concat(o))),(0,d.default)((0,u.default)(n),"state",{ch:0,cw:0,isSuccess:!1,visible:!1}),(0,d.default)((0,u.default)(n),"init",(function(e){var t=n.props,r=t.size,o=t.round,a=void 0===o?[0,0,0,0]:o,i=t.color,s=void 0===i?"#808080":i,c=t.imgRepeat,l=n.wrap.clientHeight*h,u=n.wrap.clientWidth*h;n.setState({cw:u,ch:l},(function(){if(n.canvas.addEventListener("touchmove",v,!!m&&{passive:!1}),n.ctx=n.canvas.getContext("2d"),n.ctx.scale(h,h),e){var t=n.image,o=t.width,i=t.height;if("height"===c){var f=o*(l/h/i);n.ctx.drawImage(n.image,0,0,o,i,(u/h-f)/2,0,f,l/h)}else if("width"===c){var d=i*(u/h/o);n.ctx.drawImage(n.image,0,0,o,i,0,(l/h-d)/2,u/h,d)}else"repeat"===c?(n.ctx.fillStyle=n.ctx.createPattern(n.image,"repeat"),n.ctx.fillRect(0,0,u,l)):n.ctx.drawImage(n.image,0,0,o,i,0,0,u/h,l/h)}else n.ctx.fillStyle=s,n.ctx.fillRect(0,0,u,l);for(n.ctx.globalCompositeOperation="destination-out",n.ctx.strokeStyle="#000000",n.size=r||u/h/10,n.ctx.lineWidth=n.size,n.ctx.lineCap="round",n.round=a,n.cellsX=Math.round(u/h/n.size*3),n.cellsY=Math.round(l/h/n.size*3),n.cells=[],n.sum=n.cellsX*n.cellsY,n.startCellXAccurate=3*n.round[3]/n.size,n.endCellXAccurate=3*(u/h-n.round[1])/n.size,n.startCellYAccurate=3*n.round[0]/n.size,n.endCellYAccurate=3*(l/h-n.round[2])/n.size,n.startCellX=Math.floor(n.startCellXAccurate),n.endCellX=Math.floor(n.endCellXAccurate),n.startCellY=Math.floor(n.startCellYAccurate),n.endCellY=Math.floor(n.endCellYAccurate),n.roundLen=(n.endCellX-n.startCellX)*(n.endCellY-n.startCellY),n.roundLenAccurate=(n.endCellXAccurate-n.startCellXAccurate)*(n.endCellYAccurate-n.startCellYAccurate),n.Weighting=n.roundLen/n.roundLenAccurate;n.sum--;)n.cells.push(!1);setTimeout((function(){n.setState({visible:!0})}),500)}))})),(0,d.default)((0,u.default)(n),"down",(function(e){var t=n.wrap.getClientRects()[0],r=t.left,o=t.top;n.offsetLeft=r,n.offsetTop=o;var a=e.changedTouches;a?(a=a[0],n.preX=a.pageX-n.offsetLeft,n.preY=a.pageY-n.offsetTop,window.addEventListener("touchmove",n.move,!1),window.addEventListener("touchend",n.up,!1)):(n.preX=e.pageX-n.offsetLeft,n.preY=e.pageY-n.offsetTop,window.addEventListener("mousemove",n.move,!1),window.addEventListener("mouseup",n.up,!1)),n.addRound(n.preX,n.preY)})),(0,d.default)((0,u.default)(n),"move",(function(e){var t=e.changedTouches,r=n.preX,o=n.preY;n.ctx.beginPath(),n.ctx.moveTo(n.preX,n.preY),t?(t=t[0],n.preX=t.pageX-n.offsetLeft,n.preY=t.pageY-n.offsetTop):(n.preX=e.pageX-n.offsetLeft,n.preY=e.pageY-n.offsetTop),n.ctx.lineTo(n.preX,n.preY),n.ctx.stroke(),n.canvas.style.zIndex=((+n.canvas.style.zIndex||0)+1)%2+2,n.addRound(r,o,n.preX,n.preY)})),(0,d.default)((0,u.default)(n),"up",(function(e){e.changedTouches?(window.removeEventListener("touchmove",n.move,!1),window.removeEventListener("touchend",n.up,!1)):(window.removeEventListener("mousemove",n.move,!1),window.removeEventListener("mouseup",n.up,!1)),n.checkRound()})),(0,d.default)((0,u.default)(n),"addRound",(function(e,t,r,o){var i=r-e,s=o-t;if(Math.pow(i*i+s*s,.5)>n.size){var c,l;if(0===s)c=n.size,l=0;else if(0===i)l=n.size,c=0;else{var u=Math.abs(s/i);u>1?(c=n.size/2/u,l=n.size/2):(l=n.size/2*u,c=n.size/2)}for(var f=i>0?[e,r]:[r,e],d=(0,a.default)(f,2),p=d[0],h=d[1],v=s>0?[t,o]:[o,o],m=(0,a.default)(v,2),g=m[0],b=m[1];!(p>h||g>b);)p+=c,g+=l,n.handleRound(p,g);n.handleRound(r,o)}else n.handleRound(r,o)})),(0,d.default)((0,u.default)(n),"handleRound",(function(e,t){var r=Math.floor(3*e/n.size),o=Math.floor(3*t/n.size),a=[],i=[r-1<n.startCellX||r-1>=n.endCellX?"":r-1,r<n.startCellX||r>=n.endCellX?"":r,r+1<n.startCellX||r+1>=n.endCellX?"":r+1],s=[o-1<n.startCellY||o-1>=n.endCellY?"":o-1,o<n.startCellY||o>=n.endCellY?"":o,o+1<n.startCellY||o+1>=n.endCellY?"":o+1];i.forEach((function(e,t){s.forEach((function(r,o){a[3*t+o]=""!==e&&""!==r?r*n.cellsX+e:""}))})),a.forEach((function(e){""!==e&&(n.cells[e]=!0)}))})),(0,d.default)((0,u.default)(n),"checkRound",(function(){var e=n.props,t=e.percentage,r=void 0===t?70:t,o=e.onSuccess,a=e.clear,i=Math.round(n.cells.filter((function(e){return e})).length/n.roundLen*n.Weighting*100);i>=r&&(o&&o(i),a&&n.ctx.clearRect(0,0,n.state.cw,n.state.ch),n.setState({isSuccess:!0}))})),n}return(0,f.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.img;t?(this.image=document.createElement("img"),this.image.src=t,this.image.onload=function(){return e.init(!0)},this.image.onerror=function(){return e.init(!1)}):this.init(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,o=void 0===r?"":r;return p.default.createElement("div",{className:"___scratch ".concat(o," ").concat(this.state.isSuccess?"frozen":""),ref:function(t){return e.wrap=t}},p.default.createElement("div",{className:"___content ".concat(this.state.visible?"visible":"")},n),p.default.createElement("canvas",{ref:function(t){return e.canvas=t},width:this.state.cw,height:this.state.ch,onMouseDown:this.down,onTouchStart:this.down}))}}]),t}(p.PureComponent);t.default=b},function(e,t){e.exports=require("@babel/runtime/helpers/interopRequireWildcard")},function(e,t){e.exports=require("@babel/runtime/helpers/interopRequireDefault")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("react")},function(e,t,n){var r=n(13);"string"==typeof r&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(15)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(14)(!1)).push([e.i,".___scratch {\n  position: relative;\n  display: inline-block;\n  user-select: none;\n  font-size: 0;\n}\n.___scratch.frozen {\n  pointer-events: none;\n}\n.___scratch .___content {\n  opacity: 0;\n}\n.___scratch .___content.visible {\n  opacity: 1;\n}\n.___scratch canvas {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n}\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(i=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),a=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot).concat(e," */")}));return[n].concat(a).concat([o]).join("\n")}var i,s,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var i=0;i<e.length;i++){var s=e[i];null!=s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="(".concat(s[2],") and (").concat(n,")")),t.push(s))}},t}},function(e,t,n){"use strict";var r,o={},a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function s(e,t){for(var n=[],r={},o=0;o<e.length;o++){var a=e[o],i=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[i]?r[i].parts.push(s):n.push(r[i]={id:i,parts:[s]})}return n}function c(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=o[r.id],i=0;if(a){for(a.refs++;i<a.parts.length;i++)a.parts[i](r.parts[i]);for(;i<r.parts.length;i++)a.parts.push(m(r.parts[i],t))}else{for(var s=[];i<r.parts.length;i++)s.push(m(r.parts[i],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function l(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var r=n.nc;r&&(e.attributes.nonce=r)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,f=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function p(e,t,n){var r=n.css,o=n.media,a=n.sourceMap;if(o&&e.setAttribute("media",o),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,v=0;function m(e,t){var n,r,o;if(t.singleton){var a=v++;n=h||(h=l(t)),r=d.bind(null,n,a,!1),o=d.bind(null,n,a,!0)}else n=l(t),r=p.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=s(e,t);return c(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var i=n[a],l=o[i.id];l&&(l.refs--,r.push(l))}e&&c(s(e,t),t);for(var u=0;u<r.length;u++){var f=r[u];if(0===f.refs){for(var d=0;d<f.parts.length;d++)f.parts[d]();delete o[f.id]}}}}}]);